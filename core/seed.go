package core

import (
	"context"
	"fmt"

	"github.com/redis/go-redis/v9"
)

var (
	keyPrefix  = "redis-sharing-session-key:"
	randomJSON = `[{"_id":"641c099a6330d2e77dd29678","index":0,"guid":"619e22f0-f74d-4da8-add8-303691878333","isActive":false,"balance":"$3,657.71","picture":"http://placehold.it/32x32","age":31,"eyeColor":"brown","name":"Rebekah Boyer","gender":"female","company":"GLASSTEP","email":"rebekahboyer@glasstep.com","phone":"+1 (825) 574-2948","address":"896 Allen Avenue, Loretto, Ohio, 3977","about":"Velit quis reprehenderit nostrud sit quis. Do veniam quis Lorem laborum fugiat consectetur minim Lorem ex velit id quis amet non. Id quis duis cillum nisi fugiat non sunt ea. Duis sint non qui cupidatat dolor fugiat pariatur do adipisicing sit officia occaecat nisi aliquip. Ad veniam ipsum aliqua nostrud excepteur ea pariatur dolor non in dolor sit exercitation veniam.\r\n","registered":"2020-12-31T09:19:33 -07:00","latitude":-26.049714,"longitude":120.142292,"tags":["consectetur","reprehenderit","sint","eu","ea","commodo","consequat"],"friends":[{"id":0,"name":"Vivian Gay"},{"id":1,"name":"Sherry Hodges"},{"id":2,"name":"Reyes Maxwell"}],"greeting":"Hello, Rebekah Boyer! You have 6 unread messages.","favoriteFruit":"strawberry"},{"_id":"641c099a6e4d8d65eaa00108","index":1,"guid":"4497d143-4719-4ddb-be01-5a3478857376","isActive":true,"balance":"$2,243.07","picture":"http://placehold.it/32x32","age":32,"eyeColor":"brown","name":"Shaw Ruiz","gender":"male","company":"COMTREK","email":"shawruiz@comtrek.com","phone":"+1 (933) 569-2827","address":"993 Osborn Street, Sultana, Puerto Rico, 6127","about":"Non duis qui deserunt ut reprehenderit duis dolore amet consectetur. Est Lorem labore Lorem aliquip ad voluptate laboris sit. Enim cupidatat voluptate in et aliquip veniam minim voluptate. Elit non qui cupidatat quis occaecat amet.\r\n","registered":"2021-06-13T10:22:05 -07:00","latitude":22.147456,"longitude":170.313563,"tags":["veniam","pariatur","eiusmod","cupidatat","cillum","voluptate","consequat"],"friends":[{"id":0,"name":"Mcdaniel Larson"},{"id":1,"name":"Brennan Ford"},{"id":2,"name":"Theresa Roach"}],"greeting":"Hello, Shaw Ruiz! You have 6 unread messages.","favoriteFruit":"banana"},{"_id":"641c099aa44ac41d91c9b701","index":2,"guid":"ec3d9f96-87d7-48b7-9a5f-a8d5ca1d1cd2","isActive":true,"balance":"$1,592.89","picture":"http://placehold.it/32x32","age":35,"eyeColor":"green","name":"Liz Patel","gender":"female","company":"ULTRASURE","email":"lizpatel@ultrasure.com","phone":"+1 (872) 518-3748","address":"866 Ditmas Avenue, Comptche, Virgin Islands, 2266","about":"Anim quis aliquip Lorem anim incididunt commodo. Cillum culpa sint duis qui elit do consequat proident dolore ea sit dolor amet. Sunt esse dolor in officia veniam cillum nostrud id cillum.\r\n","registered":"2020-07-15T03:05:38 -07:00","latitude":18.799791,"longitude":-65.745027,"tags":["eiusmod","adipisicing","et","in","exercitation","aliqua","irure"],"friends":[{"id":0,"name":"Winifred Higgins"},{"id":1,"name":"Megan Hess"},{"id":2,"name":"Booth Jennings"}],"greeting":"Hello, Liz Patel! You have 9 unread messages.","favoriteFruit":"apple"},{"_id":"641c099ac8d1703e54a685e8","index":3,"guid":"0ad1d3e1-3082-482a-b88a-9a3280184f1a","isActive":true,"balance":"$3,303.13","picture":"http://placehold.it/32x32","age":34,"eyeColor":"brown","name":"Claudine Robles","gender":"female","company":"MOMENTIA","email":"claudinerobles@momentia.com","phone":"+1 (963) 407-2021","address":"346 Townsend Street, Lumberton, Illinois, 4547","about":"Reprehenderit aliqua velit velit deserunt ut elit. Reprehenderit ullamco adipisicing voluptate aliquip pariatur Lorem laborum ea esse reprehenderit esse esse. Occaecat mollit consectetur adipisicing voluptate. Aliqua dolor eiusmod excepteur deserunt enim occaecat amet Lorem consequat cupidatat consectetur adipisicing eiusmod quis.\r\n","registered":"2021-11-30T03:55:19 -07:00","latitude":-72.66926,"longitude":-79.967058,"tags":["ipsum","incididunt","voluptate","voluptate","officia","labore","labore"],"friends":[{"id":0,"name":"Kayla Hartman"},{"id":1,"name":"Nannie Phelps"},{"id":2,"name":"Holly Norman"}],"greeting":"Hello, Claudine Robles! You have 3 unread messages.","favoriteFruit":"strawberry"},{"_id":"641c099a5fb482a41d02a78e","index":4,"guid":"91120716-74b1-4e3b-bf35-305273cbbfa7","isActive":false,"balance":"$2,059.61","picture":"http://placehold.it/32x32","age":24,"eyeColor":"green","name":"Pam Palmer","gender":"female","company":"FLUM","email":"pampalmer@flum.com","phone":"+1 (944) 578-3197","address":"396 Winthrop Street, Hampstead, Georgia, 5694","about":"Veniam laboris deserunt ex est culpa aliquip non irure aliqua ea pariatur sit. Minim sit sunt sint mollit excepteur fugiat anim nulla eiusmod incididunt proident. Sunt eu do eu adipisicing aute eu eiusmod Lorem. Eiusmod cupidatat sit qui dolore elit. Nostrud reprehenderit ut ullamco commodo non est aliquip veniam esse consequat dolor id amet. Eiusmod ad occaecat Lorem quis proident non esse non pariatur minim laboris.\r\n","registered":"2020-12-10T05:01:07 -07:00","latitude":74.336989,"longitude":-163.743234,"tags":["quis","excepteur","cillum","cillum","commodo","veniam","ut"],"friends":[{"id":0,"name":"Powell Koch"},{"id":1,"name":"Nicholson Juarez"},{"id":2,"name":"Riddle Carey"}],"greeting":"Hello, Pam Palmer! You have 10 unread messages.","favoriteFruit":"banana"},{"_id":"641c099a36306b1d3d33fc36","index":5,"guid":"48b13666-1f20-447e-bf73-7b50e0620376","isActive":false,"balance":"$1,483.43","picture":"http://placehold.it/32x32","age":36,"eyeColor":"green","name":"Katheryn Schwartz","gender":"female","company":"CYCLONICA","email":"katherynschwartz@cyclonica.com","phone":"+1 (909) 566-2684","address":"882 Beverly Road, Coleville, Maine, 3958","about":"Tempor id est occaecat laborum voluptate dolore consequat. Aute magna incididunt ullamco nulla. Aliquip irure duis enim eu ad esse irure Lorem dolor voluptate pariatur aute qui. Magna ullamco minim sit mollit dolor dolore fugiat. Commodo ea sunt adipisicing adipisicing culpa consequat irure aliquip anim eu ex proident velit. Fugiat officia sit nisi officia aute incididunt velit ut ipsum aute dolore elit. Id commodo proident cupidatat velit labore sit ea ad irure.\r\n","registered":"2016-03-27T08:38:41 -07:00","latitude":49.843864,"longitude":-76.871567,"tags":["elit","aliquip","veniam","deserunt","fugiat","eu","dolore"],"friends":[{"id":0,"name":"Stokes Graves"},{"id":1,"name":"Shawna Wagner"},{"id":2,"name":"Lucinda Blanchard"}],"greeting":"Hello, Katheryn Schwartz! You have 8 unread messages.","favoriteFruit":"strawberry"}]`

	KeyPrefix  = keyPrefix
	RandomJSON = randomJSON
)

func Seed(ctx context.Context, count int64) error {
	_, err := RedisClient.Pipelined(ctx, func(p redis.Pipeliner) error {
		var i int64
		for i = 0; i < count; i++ {
			p.Set(ctx, fmt.Sprintf("%s%d", keyPrefix, i), []byte(randomJSON), 0)
		}

		return nil
	})

	return err
}
